(function(e){handleElm=null,contentElm=null,contentElmOriginalPosition=null,contentElmLambdaPosition=null,menuElmSize=null,direction=null,dragStopCallback=null,dragStartCallback=null,dragCallback=null,menuVisibleCallback=null,menuHiddenCallback=null,closeAnimationDuration=0,normalizeOptionElementSelector=function(t){if(typeof t=="string"){if(t[0]!="#"&&t[0]!="."){t="#"+t}t=e(t)}if(t&&!t.jQuery){t=e(t)}return t},onDrag=function(e,t){contentElmLambdaPosition.left=contentElmOriginalPosition.left+t.position.left;contentElmLambdaPosition.top=contentElmOriginalPosition.top+t.position.top;if(dragCallback){dragCallback(this,e,t)}},onDragStart=function(t,n){contentElm.unbind("click",e.fn.dragMenu.closeMenu);if(dragStartCallback){dragStartCallback(this,t,n)}},onDragStop=function(t,n){if(contentElmLambdaPosition.left>0||contentElmLambdaPosition.top>0){contentElm.bind("click",e.fn.dragMenu.closeMenu);if(menuVisibleCallback){menuVisibleCallback(this,t,n)}}else if(contentElmLambdaPosition.left==0&&contentElmLambdaPosition.top==0){if(menuHiddenCallback){menuHiddenCallback(this,t,n)}}if(dragStopCallback){dragStopCallback(this,t,n)}},getAxisFromDirection=function(){switch(direction){case"left":case"right":return"x";case"up":case"down":return"y";default:throw"direction "+direction+" not supported."}},addCssAnimationStyle=function(){var t=closeAnimationDuration/1e3;var n=e("<style />").attr("type","text/css").html(".drag-menu-transition {  -webkit-transition: all "+t+"s linear; -moz-transition: all "+t+"s linear; -o-transition: all "+t+"s linear; transition: all "+t+"s linear; }");e("head").append(n)},e.fn.dragMenu=function(t,n,r){r=e.extend({},e.fn.dragMenu.defaultOptions,r);var i=this;handleElm=normalizeOptionElementSelector(t);if(!handleElm){return}contentElm=normalizeOptionElementSelector(n);if(!contentElm){return}menuElmSize={width:i.outerWidth(true),height:i.outerHeight(true)};contentElmOriginalPosition=contentElm.position();var s=e(document.body);var o=parseInt(s.css("margin-left").replace("px",""));var u=parseInt(s.css("margin-top").replace("Px",""));contentElmOriginalPosition.left-=o;contentElmOriginalPosition.top-=u;contentElmLambdaPosition={top:0,left:0};direction=r.direction;closeAnimationDuration=r.closeAnimationDuration;console.log(contentElmOriginalPosition.top);if(r.dragStart&&typeof r.dragStart=="function"){dragStartCallback=r.dragStart}if(r.dragStop&&typeof r.dragStop=="function"){dragStopCallback=r.dragStop}if(r.drag&&typeof r.drag=="function"){dragCallback=r.drag}if(r.menuVisible&&typeof r.menuVisible=="function"){menuVisibleCallback=r.menuVisible}if(r.menuHidden&&typeof r.menuHidden=="function"){menuHiddenCallback=r.menuHidden}addCssAnimationStyle();contentElm.draggable({handle:handleElm,axis:getAxisFromDirection(),drag:onDrag,start:onDragStart,stop:onDragStop,containment:[contentElmOriginalPosition.left,contentElmOriginalPosition.top,menuElmSize.width,menuElmSize.height]});return this},e.fn.dragMenu.openMenu=function(){contentElm.addClass("drag-menu-transition");if(direction==="right"){contentElm.css("left",menuElmSize.width)}else if(direction==="left"){contentElm.css("left",-menuElmSize.width)}else if(direction==="up"){contentElm.css("top",-menuElmSize.height)}else if(direction==="down"){contentElm.css("top",menuElmSize.height)}setTimeout(function(){contentElm.removeClass("drag-menu-transition")},closeAnimationDuration)},e.fn.dragMenu.closeMenu=function(){contentElm.addClass("drag-menu-transition").css("left",contentElmOriginalPosition.left).css("top",contentElmOriginalPosition.top);setTimeout(function(){contentElm.removeClass("drag-menu-transition")},closeAnimationDuration)},e.fn.dragMenu.defaultOptions={direction:"right",dragStart:null,drag:null,dragStop:null,menuVisible:null,menuHidden:null,closeAnimationDuration:300}})(jQuery)